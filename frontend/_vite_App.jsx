import __vite__cjsImport0_react from "/node_modules/.vite/deps/react.js?v=9f9930f0"; const React = __vite__cjsImport0_react.__esModule ? __vite__cjsImport0_react.default : __vite__cjsImport0_react; const useEffect = __vite__cjsImport0_react["useEffect"]; const useState = __vite__cjsImport0_react["useState"]; const useRef = __vite__cjsImport0_react["useRef"];
import { io } from "/node_modules/.vite/deps/socket__io-client.js?v=9f9930f0";
export default function App() {
  const [mentions, setMentions] = useState([]);
  const [counts, setCounts] = useState({ positive: 0, negative: 0, neutral: 0 });
  const socketRef = useRef(null);
  useEffect(() => {
    fetch("/api/mentions").then((r) => r.json()).then((list) => {
      setMentions(list || []);
      const c = { positive: 0, negative: 0, neutral: 0 };
      for (const m of list) c[m.sentiment_label] = (c[m.sentiment_label] || 0) + 1;
      setCounts(c);
    }).catch((err) => console.error(err));
    const socket = io("http://localhost:3000");
    socketRef.current = socket;
    socket.on("mention", (m) => {
      setMentions((prev) => [m, ...prev].slice(0, 500));
      setCounts((prev) => ({ ...prev, [m.sentiment_label]: (prev[m.sentiment_label] || 0) + 1 }));
    });
    socket.on("spike", (s) => {
      setSpikes((prev) => [s, ...prev].slice(0, 20));
    });
    return () => {
      socket.disconnect();
    };
  }, []);
  return /* @__PURE__ */ React.createElement("div", { className: "app" }, /* @__PURE__ */ React.createElement("header", null, /* @__PURE__ */ React.createElement("h1", null, "Brand Monitor"), /* @__PURE__ */ React.createElement("div", { className: "summary" }, "Positive: ", counts.positive, " â Negative: ", counts.negative, " â Neutral: ", counts.neutral), spikes.length > 0 && /* @__PURE__ */ React.createElement("div", { className: "alerts" }, /* @__PURE__ */ React.createElement("strong", null, "Alerts:"), spikes.map((s, i) => /* @__PURE__ */ React.createElement("div", { key: i, className: "alert" }, "Spike on ", /* @__PURE__ */ React.createElement("em", null, s.key), ": ", s.last, " mentions (avg ", Math.round(s.avg), ")")))), /* @__PURE__ */ React.createElement("main", null, /* @__PURE__ */ React.createElement("section", { className: "feed" }, mentions.map((m) => /* @__PURE__ */ React.createElement("article", { key: m.id, className: `mention ${m.sentiment_label}` }, /* @__PURE__ */ React.createElement("div", { className: "meta" }, /* @__PURE__ */ React.createElement("strong", null, m.source), " â ", /* @__PURE__ */ React.createElement("a", { href: m.url || "#", target: "_blank", rel: "noreferrer" }, m.title || m.url)), /* @__PURE__ */ React.createElement("p", null, (m.content || "").slice(0, 300)), /* @__PURE__ */ React.createElement("div", { className: "meta" }, "Topics: ", m.topics ? typeof m.topics === "string" ? JSON.parse(m.topics).join(", ") : m.topics.join ? m.topics.join(", ") : String(m.topics) : "â"), /* @__PURE__ */ React.createElement("small", null, "sentiment: ", m.sentiment_label, " (", (m.sentiment_score || 0).toFixed(3), ")"))))));
}

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkFwcC5qc3giXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlU3RhdGUsIHVzZVJlZiB9IGZyb20gJ3JlYWN0J1xyXG5pbXBvcnQgeyBpbyB9IGZyb20gJ3NvY2tldC5pby1jbGllbnQnXHJcblxyXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBBcHAoKXtcclxuICBjb25zdCBbbWVudGlvbnMsIHNldE1lbnRpb25zXSA9IHVzZVN0YXRlKFtdKVxyXG4gIGNvbnN0IFtjb3VudHMsIHNldENvdW50c10gPSB1c2VTdGF0ZSh7IHBvc2l0aXZlOjAsIG5lZ2F0aXZlOjAsIG5ldXRyYWw6MCB9KVxyXG4gIGNvbnN0IHNvY2tldFJlZiA9IHVzZVJlZihudWxsKVxyXG5cclxuICB1c2VFZmZlY3QoKCk9PntcclxuICAgIC8vIGxvYWQgcmVjZW50IG1lbnRpb25zXHJcbiAgICBmZXRjaCgnL2FwaS9tZW50aW9ucycpLnRoZW4ocj0+ci5qc29uKCkpLnRoZW4obGlzdD0+e1xyXG4gICAgICBzZXRNZW50aW9ucyhsaXN0IHx8IFtdKVxyXG4gICAgICBjb25zdCBjID0geyBwb3NpdGl2ZTowLCBuZWdhdGl2ZTowLCBuZXV0cmFsOjAgfVxyXG4gICAgICBmb3IgKGNvbnN0IG0gb2YgbGlzdCkgY1ttLnNlbnRpbWVudF9sYWJlbF0gPSAoY1ttLnNlbnRpbWVudF9sYWJlbF18fDApKzFcclxuICAgICAgc2V0Q291bnRzKGMpXHJcbiAgICB9KS5jYXRjaChlcnI9PiBjb25zb2xlLmVycm9yKGVycikpXHJcblxyXG4gICAgLy8gY29ubmVjdCB0byBzb2NrZXQuaW9cclxuICAgIGNvbnN0IHNvY2tldCA9IGlvKCdodHRwOi8vbG9jYWxob3N0OjMwMDAnKVxyXG4gICAgc29ja2V0UmVmLmN1cnJlbnQgPSBzb2NrZXRcclxuICAgIHNvY2tldC5vbignbWVudGlvbicsIChtKT0+e1xyXG4gICAgICBzZXRNZW50aW9ucyhwcmV2PT5bbSwgLi4ucHJldl0uc2xpY2UoMCw1MDApKVxyXG4gICAgICBzZXRDb3VudHMocHJldj0+KHsgLi4ucHJldiwgW20uc2VudGltZW50X2xhYmVsXToocHJldlttLnNlbnRpbWVudF9sYWJlbF18fDApKzEgfSkpXHJcbiAgICB9KVxyXG4gICAgc29ja2V0Lm9uKCdzcGlrZScsIChzKSA9PiB7XHJcbiAgICAgIHNldFNwaWtlcyhwcmV2ID0+IFtzLCAuLi5wcmV2XS5zbGljZSgwLCAyMCkpO1xyXG4gICAgfSlcclxuXHJcbiAgICByZXR1cm4gKCk9PntcclxuICAgICAgc29ja2V0LmRpc2Nvbm5lY3QoKVxyXG4gICAgfVxyXG4gIH0sIFtdKVxyXG5cclxuICByZXR1cm4gKFxyXG4gICAgPGRpdiBjbGFzc05hbWU9XCJhcHBcIj5cclxuICAgICAgPGhlYWRlcj5cclxuICAgICAgICA8aDE+QnJhbmQgTW9uaXRvcjwvaDE+XHJcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzdW1tYXJ5XCI+UG9zaXRpdmU6IHtjb3VudHMucG9zaXRpdmV9IOKAlCBOZWdhdGl2ZToge2NvdW50cy5uZWdhdGl2ZX0g4oCUIE5ldXRyYWw6IHtjb3VudHMubmV1dHJhbH08L2Rpdj5cclxuICAgICAgICB7c3Bpa2VzLmxlbmd0aCA+IDAgJiYgKFxyXG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGVydHNcIj5cclxuICAgICAgICAgICAgPHN0cm9uZz5BbGVydHM6PC9zdHJvbmc+XHJcbiAgICAgICAgICAgIHtzcGlrZXMubWFwKChzLCBpKSA9PiAoXHJcbiAgICAgICAgICAgICAgPGRpdiBrZXk9e2l9IGNsYXNzTmFtZT1cImFsZXJ0XCI+U3Bpa2Ugb24gPGVtPntzLmtleX08L2VtPjoge3MubGFzdH0gbWVudGlvbnMgKGF2ZyB7TWF0aC5yb3VuZChzLmF2Zyl9KTwvZGl2PlxyXG4gICAgICAgICAgICApKX1cclxuICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICl9XHJcbiAgICAgIDwvaGVhZGVyPlxyXG5cclxuICAgICAgPG1haW4+XHJcbiAgICAgICAgPHNlY3Rpb24gY2xhc3NOYW1lPVwiZmVlZFwiPlxyXG4gICAgICAgICAge21lbnRpb25zLm1hcChtID0+IChcclxuICAgICAgICAgICAgPGFydGljbGUga2V5PXttLmlkfSBjbGFzc05hbWU9e2BtZW50aW9uICR7bS5zZW50aW1lbnRfbGFiZWx9YH0+XHJcbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJtZXRhXCI+PHN0cm9uZz57bS5zb3VyY2V9PC9zdHJvbmc+IOKAlCA8YSBocmVmPXttLnVybHx8JyMnfSB0YXJnZXQ9XCJfYmxhbmtcIiByZWw9XCJub3JlZmVycmVyXCI+e20udGl0bGUgfHwgbS51cmx9PC9hPjwvZGl2PlxyXG4gICAgICAgICAgICAgIDxwPnsobS5jb250ZW50fHwnJykuc2xpY2UoMCwzMDApfTwvcD5cclxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cIm1ldGFcIj5Ub3BpY3M6IHttLnRvcGljcyA/ICh0eXBlb2YgbS50b3BpY3MgPT09ICdzdHJpbmcnID8gSlNPTi5wYXJzZShtLnRvcGljcykuam9pbignLCAnKSA6IChtLnRvcGljcy5qb2luID8gbS50b3BpY3Muam9pbignLCAnKSA6IFN0cmluZyhtLnRvcGljcykpKSA6ICfigJQnfTwvZGl2PlxyXG4gICAgICAgICAgICAgIDxzbWFsbD5zZW50aW1lbnQ6IHttLnNlbnRpbWVudF9sYWJlbH0gKHsobS5zZW50aW1lbnRfc2NvcmV8fDApLnRvRml4ZWQoMyl9KTwvc21hbGw+XHJcbiAgICAgICAgICAgIDwvYXJ0aWNsZT5cclxuICAgICAgICAgICkpfVxyXG4gICAgICAgIDwvc2VjdGlvbj5cclxuICAgICAgPC9tYWluPlxyXG4gICAgPC9kaXY+XHJcbiAgKVxyXG59XHJcbiJdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxTQUFTLFdBQVcsVUFBVSxjQUFjO0FBQ25ELFNBQVMsVUFBVTtBQUVuQix3QkFBd0IsTUFBSztBQUMzQixRQUFNLENBQUMsVUFBVSxXQUFXLElBQUksU0FBUyxD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
